<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Deploying to Heroku - Scalatra</title>
    <meta name="generator" content="Hugo 0.19" />

    
    <meta name="description" content="Documentation and how-to guides for the Scalatra microframework.">
    
    <link rel="canonical" href="https://scalatra.github.io/scalatra-docbuild/guides/2.2/deployment/heroku.html">
    

    <meta property="og:url" content="https://scalatra.github.io/scalatra-docbuild/guides/2.2/deployment/heroku.html">
    <meta property="og:title" content="Scalatra">
    <meta property="og:image" content="https://scalatra.github.io/scalatra-docbuild/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Scalatra">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://scalatra.github.io/scalatra-docbuild/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://scalatra.github.io/scalatra-docbuild/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.eot?52m981');
        src: url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.woff?52m981')
               format('woff'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/application.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/bootstrap-styles.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild//stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://scalatra.github.io/scalatra-docbuild/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Deploying to Heroku
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/scalatra" title="@scalatra on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/scalatra/scalatra" title="@scalatra/scalatra on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://scalatra.github.io/scalatra-docbuild/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://scalatra.github.io/scalatra-docbuild/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Scalatra </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        
        <ul>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/getting-started/">Getting started</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/news.html">News</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/guides/2.5/">Guides</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/community/">Community</a></li>
          
          
        </ul>
        

        
        <a href="https://www.manning.com/books/scalatra-in-action" target="_blank">
          <img src="https://scalatra.github.io/scalatra-docbuild/images/book-cover.png" alt="Scalatra in Action">
        </a>
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Deploying to Heroku </h1>

			

<p><a href="http://www.heroku.com/">Heroku</a> is a cloud application platform that makes it easy to deploy and scale applications. With the right project setup, deploying your application becomes as easy as <code>git push</code>.</p>

<div class="alert alert-info">
  <span class="badge badge-info"><i class="icon-flag icon-white"></i></span>
  See
  <a href="{{site.examples}}deployment/scalatra-heroku">scalatra-heroku</a>
  for a minimal and standalone project containing the example in this guide.
</div>

<hr />

<h2 id="1-sign-up-for-a-free-a-free-account-https-api-heroku-com-signup">1. Sign up for a free a <a href="https://api.heroku.com/signup">free account</a>.</h2>

<h2 id="2-install-the-heroku-toolbelt-https-toolbelt-herokuapp-com">2. Install the <a href="https://toolbelt.herokuapp.com/">Heroku Toolbelt</a>.</h2>

<h2 id="3-set-up-a-project">3. Set up a project.</h2>

<p>Create a Scalatra project from the usual Scalatra giter8 template.
Check out the the <a href="{{site.baseurl}}getting-started/installation.html">installation</a> and <a href="{{site.baseurl}}getting-started/first-project.html">first project</a> guides if this isn&rsquo;t familiar.</p>

<pre><code class="language-bash">$ g8 scalatra/scalatra-sbt -b develop
</code></pre>

<h2 id="4-tweak-the-app-for-heroku">4. Tweak the app for Heroku</h2>

<h3 id="make-jetty-embeddable">Make Jetty embeddable</h3>

<p>Open <code>project/build.scala</code> in the root of your project. You will find two lines like these:</p>

<pre><code class="language-scala">&quot;org.eclipse.jetty&quot; % &quot;jetty-webapp&quot; % &quot;8.1.10.v20130312&quot; % &quot;container&quot;,
&quot;org.eclipse.jetty.orbit&quot; % &quot;javax.servlet&quot; % &quot;3.0.0.v201112011016&quot; % &quot;container;provided;test&quot; artifacts (Artifact(&quot;javax.servlet&quot;, &quot;jar&quot;, &quot;jar&quot;))
</code></pre>

<p>Those are basically right, but we need to add <code>compile</code> scope because Heroku is not a servlet host. It can only run your app via an embedded Jetty server you provide. So replace the two lines above with these two:</p>

<pre><code class="language-scala">&quot;org.eclipse.jetty&quot; % &quot;jetty-webapp&quot; % &quot;8.1.10.v20130312&quot; % &quot;compile;container&quot;,
&quot;org.eclipse.jetty.orbit&quot; % &quot;javax.servlet&quot; % &quot;3.0.0.v201112011016&quot; % &quot;compile;container;provided;test&quot; artifacts (Artifact(&quot;javax.servlet&quot;, &quot;jar&quot;, &quot;jar&quot;))
</code></pre>

<h3 id="escape-sbt">Escape sbt</h3>

<p>You don&rsquo;t want to use sbt to run your app in production. We&rsquo;ll install an sbt plugin that will create a start script during compilation. Heroku will use that start script.</p>

<p>Tell sbt where to find the plugin by adding this line to <code>project/plugins.sbt</code> (you may need to create the file first):</p>

<pre><code class="language-scala">addSbtPlugin(&quot;com.typesafe.startscript&quot; % &quot;xsbt-start-script-plugin&quot; % &quot;0.5.3&quot;)
</code></pre>

<p>For sbt version 0.13.0 add following instead:</p>

<pre><code class="language-scala">addSbtPlugin(&quot;com.typesafe.sbt&quot; % &quot;sbt-start-script&quot; % &quot;0.10.0&quot;)
</code></pre>

<p>Now you&rsquo;ve got the Typesafe start script available.  Stick that into the
Project settings, in <code>project/build.scala</code>. A default Scalatra project template
usually has something like this in it:</p>

<pre><code class="language-scala">lazy val project = Project (
    &quot;heroku-example&quot;,
    file(&quot;.&quot;),
    settings = ++ Defaults.defaultSettings ++ ScalatraPlugin.scalatraWithJRebel ++ scalateSettings ++ Seq(
      organization := Organization,
      name := Name,
      // more stuff here
</code></pre>

<p>You&rsquo;ll want to add a <code>Seq</code> of settings pulled from the Typesafe startscript plugin.</p>

<p>Add it into the project settings:</p>

<pre><code class="language-scala">  lazy val project = Project (
    &quot;heroku-example&quot;,
    file(&quot;.&quot;),
    settings = seq(com.typesafe.startscript.StartScriptPlugin.startScriptForClassesSettings: _*) ++ Defaults.defaultSettings ++ ScalatraPlugin.scalatraWithJRebel ++ scalateSettings ++ Seq(
      organization := Organization,
      name := Name,
      // more stuff here
</code></pre>

<p>For sbt 0.13.0 this <code>Seq</code> is:</p>

<pre><code class="language-scala">seq(com.typesafe.sbt.SbtStartScript.startScriptForClassesSettings: _*)
</code></pre>

<h3 id="tell-heroku-to-use-the-generated-start-script">Tell Heroku to use the generated start script</h3>

<p>Create a file named <code>Procfile</code> in the root of your application.
Add this line:</p>

<pre><code>web: target/start
</code></pre>

<h3 id="create-a-main-method">Create a <code>main</code> method</h3>

<p>Since Heroku launches your app as a vanilla Java/Scala project, you need to create a <code>main</code> method that launches the servlet.</p>

<p>Create <code>src/main/scala/JettyLauncher.scala</code> with this code:</p>

<pre><code class="language-scala">import org.eclipse.jetty.server.Server
import org.eclipse.jetty.servlet.{ DefaultServlet, ServletContextHandler }
import org.eclipse.jetty.webapp.WebAppContext
import org.scalatra.servlet.ScalatraListener

object JettyLauncher {
  def main(args: Array[String]) {
    val port = if(System.getenv(&quot;PORT&quot;) != null) System.getenv(&quot;PORT&quot;).toInt else 8080

    val server = new Server(port)
    val context = new WebAppContext()
    context.setContextPath(&quot;/&quot;)
    context.setResourceBase(&quot;src/main/webapp&quot;)

    context.setEventListeners(Array(new ScalatraListener))

    server.setHandler(context)

    server.start
    server.join
  }
}
</code></pre>

<p>And don&rsquo;t forget to set your servlet in mapping:</p>

<pre><code class="language-scala">context.addServlet(classOf[com.example.app.MyScalatraServlet], &quot;/*&quot;)
</code></pre>

<h2 id="5-deploy">5. Deploy</h2>

<p>If you haven&rsquo;t set up your project as a Git repo, do so.</p>

<pre><code class="language-bash">$ cd [app root]
$ chmod u+x sbt
$ git init
$ git add .
$ git commit -m 'first commit'
</code></pre>

<p>Log into Heroku.</p>

<pre><code class="language-bash">$ heroku login
</code></pre>

<p>Create your Heroku endpoint and deploy to it.</p>

<pre><code class="language-bash">$ cd [app root]
$ heroku create --stack cedar
$ git push heroku master
</code></pre>

<p>After a couple minutes of streaming output, the last few lines will look like this:</p>

<pre><code>-----&gt; Discovering process types
       Procfile declares types -&gt; web
-----&gt; Compiled slug size: 43.4MB
-----&gt; Launching... done, v5
       http://polar-atoll-9149.herokuapp.com deployed to Heroku

To git@heroku.com:polar-atoll-9149.git
* [new branch]      master -&gt; master
</code></pre>

<p>Open your browser to to the URL provided right before <code>deployed to Heroku</code> in the output.</p>

<h2 id="6-limitations">6. Limitations</h2>

<p>No app host is perfect. You should be aware of two limitations as you develop on Heroku:</p>

<ul>
<li>Heroku <a href="https://devcenter.heroku.com/articles/slug-compiler">&ldquo;slugs&rdquo;</a> (deployed apps with their dependencies) are limited to 300MB.
If your project has a large number of dependencies, you may exceed this limit.</li>
<li>At present, Heroku <a href="https://devcenter.heroku.com/articles/http-routing#websockets">does not support WebSockets</a>.</li>
</ul>

<p><a href="jelastic.html">Jelastic</a> is another app host that does not have these limitations.
However, Jelastic does not have Heroku&rsquo;s special access to AWS products.</p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Scalatra Team &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

<script>

  var base_url = '';
  var repo_id  = '';

</script>

<script src="https://scalatra.github.io/scalatra-docbuild/javascripts/application.js"></script>


<script>
  /* Add headers to scrollspy */
  var headers   = document.getElementsByTagName("h2");
  var scrollspy = document.getElementById('scrollspy');

  if(scrollspy) {
    if(headers.length > 0) {
      for(var i = 0; i < headers.length; i++) {
        var li = document.createElement("li");
        li.setAttribute("class", "anchor");

        var a  = document.createElement("a");
        a.setAttribute("href", "#" + headers[i].id);
        a.setAttribute("title", headers[i].innerHTML);
        a.innerHTML = headers[i].innerHTML;

        li.appendChild(a)
        scrollspy.appendChild(li);
      }
    } else {
      scrollspy.parentElement.removeChild(scrollspy)
    }


    /* Add permanent link next to the headers */
    var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

    for(var i = 0; i < headers.length; i++) {
        var a = document.createElement("a");
        a.setAttribute("class", "headerlink");
        a.setAttribute("href", "#" + headers[i].id);
        a.setAttribute("title", "Permanent link")
        a.innerHTML = "#";
        headers[i].appendChild(a);
    }
  }
</script>



<script src="https://scalatra.github.io/scalatra-docbuild/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

