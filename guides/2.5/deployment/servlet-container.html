<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Deploying to servlet containers - Scalatra</title>
    <meta name="generator" content="Hugo 0.19" />

    
    <meta name="description" content="Documentation and how-to guides for the Scalatra microframework.">
    
    <link rel="canonical" href="https://scalatra.github.io/scalatra-docbuild/guides/2.5/deployment/servlet-container.html">
    

    <meta property="og:url" content="https://scalatra.github.io/scalatra-docbuild/guides/2.5/deployment/servlet-container.html">
    <meta property="og:title" content="Scalatra">
    <meta property="og:image" content="https://scalatra.github.io/scalatra-docbuild/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Scalatra">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://scalatra.github.io/scalatra-docbuild/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://scalatra.github.io/scalatra-docbuild/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.eot?52m981');
        src: url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.woff?52m981')
               format('woff'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://scalatra.github.io/scalatra-docbuild/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/application.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild/stylesheets/bootstrap-styles.css">
    <link rel="stylesheet" href="https://scalatra.github.io/scalatra-docbuild//stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://scalatra.github.io/scalatra-docbuild/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Deploying to servlet containers
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/scalatra" title="@scalatra on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/scalatra/scalatra" title="@scalatra/scalatra on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://scalatra.github.io/scalatra-docbuild/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://scalatra.github.io/scalatra-docbuild/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Scalatra </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        
        <ul>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/getting-started/">Getting started</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/news.html">News</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/guides/2.5/">Guides</a></li>
          
          <li><a href="https://scalatra.github.io/scalatra-docbuild/community/">Community</a></li>
          
          
        </ul>
        

        
        <a href="https://www.manning.com/books/scalatra-in-action" target="_blank">
          <img src="https://scalatra.github.io/scalatra-docbuild/images/book-cover.png" alt="Scalatra in Action">
        </a>
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Deploying to servlet containers </h1>

			

<div class="alert alert-info">
  <span class="badge badge-info"><i class="icon-flag icon-white"></i></span>
  If you're coming from a non-Java background, you may find the subject of
  servlet containers and JVM deployments to be unnecessarily frightening. Don't
  despair. Despite all the mystery which surrounds them, servlet deployments are
  extremely simple. You will be surprised at how easy it is!
</div>

<h3 id="compatibility">Compatibility</h3>

<p>Scalatra 2.2 runs on any servlet container which supports the Servlet 3.0 standard.</p>

<p>If you&rsquo;re using an older container, you&rsquo;ll need to run the older Scalatra 2.0.x series.</p>

<h3 id="as-a-war-file">As a war file</h3>

<p>The simplest way to deploy your Scalatra application is as a Web ARchive (WAR)
file. With any luck, your app can be up and running in a production configuration
about 5 minutes from now.</p>

<p>From the command line, execute the following:</p>

<pre><code>$ sbt
</code></pre>

<p>Now you&rsquo;re in the sbt console. Package your application by typing <code>package</code>:</p>

<pre><code>&gt; package
[info] Compiling 6 Scala sources to /path/to/your/project/target/scala-2.9.1/classes...
[info] Packaging /path/to/your/project/target/scala-2.9.1/yourproject_2.9.1-0.1.0-SNAPSHOT.war ...
[info] Done packaging.
</code></pre>

<p>This will generate a WAR file for you, and tell you where it went. A WAR file
is basically a zip file which contains your entire application, including all
of its compiled Scala code, and associated assets such as images, javascript,
stylesheets.</p>

<h4 id="your-own-servlet-container">Your own servlet container</h4>

<p>Now that you&rsquo;ve got a WAR file, you can run it in a servlet container - there are certainly
<a href="http://en.wikipedia.org/wiki/Web_container">lots to choose from</a>.</p>

<p>Let&rsquo;s try <a href="http://tomcat.apache.org">Tomcat</a>, with a local installation.</p>

<div class="alert alert-info">
<p><span class="badge badge-info"><i class="icon-flag icon-white"></i></span>
What follows is <strong>not</strong> a best-practice guide for configuring Tomcat.
It's aimed at people who are new to servlet containers, and want to see their
application working. Servlet container configuration can be as potentially complex
as other web servers, such as Apache or Nginx, and it's up to you to understand
the performance and security implications of what you're doing. We recommend
that you read the docs on your chosen servlet container before exposing yourself
to the public internet.</p>

<p>Having said all that, the basic case is extremely easy, as you'll see in a moment.</p>
</div>

<p>First download and extract tomcat:</p>

<pre><code>$ wget http://mirror.lividpenguin.com/pub/apache/tomcat/tomcat-7/v7.0.29/bin/apache-tomcat-7.0.29.tar.gz
$ mv apache-tomcat-7.0.29.tar.gz ~/Desktop/tomcat.tar.gz # or wherever you want it.
$ tar -xvzf ~/Desktop/tomcat.tar.gz
</code></pre>

<p>Ok, Tomcat is now installed.</p>

<pre><code>$ ~/Desktop/tomcat/bin/startup.sh
</code></pre>

<p>Now it should be started. Test this by browsing to
<a href="http://localhost:8080/">http://localhost:8080/</a></p>

<p>Now deploy your application. Dropping a war file into Tomcat&rsquo;s <code>webapp</code> folder
causes it to be extracted, or &ldquo;exploded&rdquo;. Tomcat will initialize your application
on the first request.</p>

<pre><code>$ mv /path/to/your/project/target/scala-2.9.1/yourproject_2.9.1-0.1.0-SNAPSHOT.war ~/Desktop/tomcat/webapps/yourapp.war
</code></pre>

<p>Browse to <a href="http://localhost:8080/yourapp/">http://localhost:8080/yourapp/</a></p>

<p>It&rsquo;s alive! Or it should be.</p>

<div class="alert alert-info">
<span class="badge badge-info"><i class="icon-flag icon-white"></i></span>
Keep in mind that we've assumed your application has a route defined at the
path "/".
</div>

<p>Paths inside the servlet container will be root-relative, so if you&rsquo;ve
got your servlets mounted like this in your Scalatra bootstrap file:</p>

<pre><code>// mount servlets like this:
context mount (new ArticlesServlet, &quot;/articles/*&quot;)
</code></pre>

<p>you would need to go to <a href="http://localhost:8080/yourapp/articles/">http://localhost:8080/yourapp/articles/</a></p>

<p>If you&rsquo;ve hardcoded any paths in your application, you may see your app working,
but the stylesheets and internal links may not be working correctly.</p>

<p>If that&rsquo;s the case, it&rsquo;s time for a bit of a trick. You can move Tomcat&rsquo;s
ROOT application to another spot, and put your app at the ROOT.</p>

<pre><code>$ mv ~/Desktop/tomcat/webapps/ROOT ~/Desktop/tomcat/webapps/ORIGINAL_ROOT
$ mv /path/to/your/project/target/scala-2.9.1/yourproject_2.9.1-0.1.0-SNAPSHOT.war ~/Desktop/tomcat/webapps/ROOT.war
</code></pre>

<div class="alert alert-warning">
<span class="badge badge-warning"><i class="icon-flag icon-white"></i></span>  Tomcat paths are case-sensitive. Make sure you copy your app to `ROOT.war`.<br /><br />
Request body params dont get parsed in 'put(/:resource)' api when deploying scalatra app as a WAR in Tomcat 7. To make your PUT work, set the connector attribute 'parseBodyMethods' to 'POST,PUT' in server.xml of tomcat. The same goes for PATCH.
</div>

<p>Your app should now be running at <a href="http://localhost:8080/">http://localhost:8080/</a></p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Scalatra Team &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

<script>

  var base_url = '';
  var repo_id  = '';

</script>

<script src="https://scalatra.github.io/scalatra-docbuild/javascripts/application.js"></script>


<script>
  /* Add headers to scrollspy */
  var headers   = document.getElementsByTagName("h2");
  var scrollspy = document.getElementById('scrollspy');

  if(scrollspy) {
    if(headers.length > 0) {
      for(var i = 0; i < headers.length; i++) {
        var li = document.createElement("li");
        li.setAttribute("class", "anchor");

        var a  = document.createElement("a");
        a.setAttribute("href", "#" + headers[i].id);
        a.setAttribute("title", headers[i].innerHTML);
        a.innerHTML = headers[i].innerHTML;

        li.appendChild(a)
        scrollspy.appendChild(li);
      }
    } else {
      scrollspy.parentElement.removeChild(scrollspy)
    }


    /* Add permanent link next to the headers */
    var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

    for(var i = 0; i < headers.length; i++) {
        var a = document.createElement("a");
        a.setAttribute("class", "headerlink");
        a.setAttribute("href", "#" + headers[i].id);
        a.setAttribute("title", "Permanent link")
        a.innerHTML = "#";
        headers[i].appendChild(a);
    }
  }
</script>



<script src="https://scalatra.github.io/scalatra-docbuild/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

